datasource db {
  provider = "postgresql"
   url               = env("DATABASE_URL")
  directUrl         = env("DIRECT_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Message {
  id            String    @id @default(cuid()) // Unique message ID
  parentId      String? // Optional parent ID if this message is part of a branch
  chatIndex     Int // Index representing the order of the message in the conversation
  content       String // The actual content of the message
  role          Role // Role of the sender (user or assistant)
  createdAt     DateTime  @default(now()) // Timestamp of when the message was created
  branchVersion Int       @default(0) // Tracks the branch version for edits
  children      Message[] @relation("MessageToMessage") // Points to messages branching from this one

  // Relations
  parent Message? @relation("MessageToMessage", fields: [parentId], references: [id])
}

enum Role {
  USER
  ASSISTANT
}
